<ion-header>
  <ion-toolbar>
    <ion-title>
      Weather Search
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="theme">

  <ion-searchbar animated placeholder="Search location" debounce="500" mode="ios"
  [(ngModel)]="searchText" (search)="search($event)"></ion-searchbar>

  <ion-content *ngIf="weatherData">
    <ion-grid>
      <ion-row>
        <ion-col class="ion-text-center">
          <img *ngIf="imgURL" [src]="imgURL">
        </ion-col>
        <ion-col class="ion-text-center">
          <h1>{{weatherData.main.temp}} °C</h1>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col class="ion-text-right">
          <h3 class="ion-text-middle">{{weatherData.name}}</h3>
        </ion-col>
      </ion-row>
  
      <ion-row>
        <ion-col class="ion-text-right">
          <h2>{{weatherData.weather[0].main}}</h2>
        </ion-col>
      </ion-row>
  
      <ion-row>
        <ion-col size="12" size-sm>
          <ion-grid>
            <ion-row class="ion-grey">
              <ion-col>
                Clouds
              </ion-col>
              <ion-col class="ion-text-right">
                {{weatherData.clouds.all}} %
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-col>
        <ion-col size="12" size-sm>
          <ion-grid>
            <ion-row class="ion-grey">
              <ion-col>
                Wind
              </ion-col>
              <ion-col class="ion-text-right">
                {{weatherData.wind.speed}} m/s {{weatherData.wind.deg}}°
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-col>
      </ion-row>
  
      <ion-row>
        <ion-col size="12" size-sm>
          <ion-grid>
            <ion-row class="ion-grey">
              <ion-col>
                Rain
              </ion-col>
              <ion-col class="ion-text-right" *ngIf="weatherData.rain">
                {{weatherData.rain['1h'] || 0}} mm
              </ion-col>
              <ion-col class="ion-text-right" *ngIf="!weatherData.rain">
                0 mm
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-col>
        <ion-col size="12" size-sm>
          <ion-grid>
            <ion-row class="ion-grey">
              <ion-col>
                Humidity
              </ion-col>
              <ion-col class="ion-text-right">
                {{weatherData.main.humidity}} %
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-col>
      </ion-row>
  
      <ion-row>
        <ion-col size="12" size-sm>
          <ion-grid>
            <ion-row class="ion-grey">
              <ion-col>
                Pressure
              </ion-col>
              <ion-col class="ion-text-right">
                {{weatherData.main.pressure}} hPa
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-col>
        <ion-col size="12" size-sm>
          <ion-grid>
            <ion-row class="ion-grey">
              <ion-col>
                Max / Min
              </ion-col>
              <ion-col class="ion-text-right">
                {{weatherData.main.temp_max}} / {{weatherData.main.temp_min}} °C
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-content>

  <ion-content *ngIf="!weatherData && searchActive" class="ion-text-center ion-padding-top">
    <ion-spinner></ion-spinner>
  </ion-content>